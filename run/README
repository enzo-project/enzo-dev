The test_runner suite will run a series of tests with the current version of 
enzo.  It compares these new outputs against a set of existing "good" outputs 
(either from analytical solutions or from previous versions of enzo).  It 
returns how the current version of enzo performed on these tests.

You must specify a test destination directory outside of the enzo file 
structure where the tests will executed and tested.  You can also specify 
invididual test tags for choosing the tests to run.  By default, all the tests 
will be run.

In order to run the test_runner suite, go to the enzo/run subdirectory and 
execute:

Usage: ./test_runner.py -o <TEST_DEST_DIR> --<TEST_TAG>=<TEST_TAG_VAL> 

Example: ./test_runner.py -o ~/temp --AMR=True --author="John Wise"

The test tags are (with defaults first followed by alternatives):

name = ''
answer_testing_script = None  'my_test_file.py'
nprocs = 1
runtime = 'short', 'medium', 'long'
hydro = False, True
mhd = False, True
gravity = False, True
cosmology = False, True
chemistry = False, True
cooling = False, True
AMR = False, True
dimensionality = 1, 2, 3
author = 'John Wise'
radiation = None, 'fld', 'ray'
max_time_minutes = 1  

Additional flags are:

  -h, --help            show this help message and exit
  -c COMPARE_DIR, --compare-dir=COMPARE_DIR
                        The directory structure to compare against
  --clobber             Recopies tests and tests from scratch.
  -g GATHER_DIR, --gather=GATHER_DIR
                        Gather test results from this directory into a tar
                        file.
  --interleave          Option to interleave preparation, running, and
                        testing.
  -m MACHINE, --machine=MACHINE
                        Machine to run tests on.
  -o OUTPUT_DIR, --output-dir=OUTPUT_DIR
                        Where to place the run directory
  --repo=REPOSITORY     Path to repository being tested.
  --sim-only            Only run simulations.
  --test-only           Only perform tests.
  --time-multiplier=TIME_MULTIPLIER
                        Multiply simulation time limit by this factor.
  -v, --verbose         Slightly more verbose output.
  -b, --bisect          Run bisection on test. Requires revisions--good and
                        --bad.  Best if --repo is different from location of
                        test_runner.py.Runs  --problematic suite.  See README
                        for more info
  --good=GOOD           For bisection, most recent good revision
  --bad=BAD             For bisection, most recent bad revision
  -j JCOMPILE, --jcompile=JCOMPILE
                        number of processors with which to compile when running bisect.
  --changeset=CHANGESET
                        Changeset to use in simulation repo.  If supplied,
                        make clean && make is also run


TEST SUITES:
Three test suites exist: quick (37 tests), push (48 tests), and full (95 tests).  
The larger test suites encompass all tests of the smaller test suites.

QUICK
The quick suite is designed to be run periodically as one works on the code.  The 
estimated run time is 25 minutes.
Run with --quicksuite=True
Gold standard available at: http://enzo-project.org/tests/gold_standard_quick.tar.bz2

PUSH
The push suite should be run immediately prior to pushing changes or issuing a pull 
request.  The estimated run time is 90 minutes.
Run with --pullsuite=True
Gold standard available at: http://enzo-project.org/tests/gold_standard_push.tar.bz2

FULL
The full suite is designed to be run monthly or whenever major changes have been pushed.  
The full suite contains tests that may take up to 10 hours to complete and also 
includes all the FLD tests which require the hypre-yes compile option and HYPRE libraries 
to be installed.  The estimated run time is about 36 hours.
Run with --fullsuite=True
Gold standard available at: http://enzo-project.org/tests/gold_standard_full.tar.bz2

RUNNING BISECTION

In order to identify changesets that caused problems, we have provied the "--bisect" flag.  
This runs hg bisect on revisions between --good and --bad.

hg bisect automatically manipulates the repository as runs its course.  In order to keep
the tests that get run consistent through the course of the bisection, we recommend using 
a --repo that is distinct from the repository where the test is run.  

In order to minimize the number of tests run, bisection is only run on tests for which 
"problematic=True".  This must be set by hand by the user before running biset.  It is best
this is a single problem, though if multiple tests match that flag, failures are combined with "or"


An example of using this is:

echo "problematic = True" >> Cosmology/Hydro/AdiabaticExpansion/AdiabaticExpansion.enzotest
./test_runner.py  --output-dir=/scratch/dcollins/TESTS --repo=/SOMEWHERE_ELSE \
  --compare-dir=$mylar/ac7a5dacd12b --bisect --good=ac7a5dacd12b --bad=30cb5ff3c074 -j 8

To run preliminary tests before bisection, we have also supplied the --changeset option.  If supplied, --repo is updated to 
--changeset and compiled.  Compile errors cause test_runner.py to return that error, otherwise the tests/bisector is run.  
